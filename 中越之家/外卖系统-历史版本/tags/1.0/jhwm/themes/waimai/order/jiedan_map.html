

<!--<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=7b92b3afff29988b6d4dbf9a00698ed8"></script>-->
<script src="//webapi.amap.com/maps?v=1.4.2&key=<{$jh_map_key}>"></script>

<div class="orderMap">
    <!--<a class="tipNum" href="tel:<{$order.staff.mobile}>">骑手：<{$order.staff.name}>  <{$order.staff.mobile}> <i class="ico_phone fr"></i></a>-->
   <div id="map" style="height: 240px;width: 100%;z-index: 999"></div>
    <div class="" style="position: absolute; z-index: 1000; right: 0; bottom: 0; background: rgba(0,0,0,0.60); width: 24px; height: 24px; padding: 5px;" onclick="map_tiao();"><img src="/themes/waimai/static/img/map_ico.png" width="100%;"></div>
</div>

<script type="text/javascript">


    var lng = '<{$order.o_lng}>';
    var lat ='<{$order.o_lat}>';
    var staff_lng = '<{$staff.lng}>';
    var staff_lat = '<{$staff.lat}>';
    var person_lng = '<{$order.lng}>';
    var person_lat ='<{$order.lat}>';
    var msg = '<{$msg}>';
    var  map    = new AMap.Map('map');
    map.setZoomAndCenter(13, [staff_lng, staff_lat]);




   /* var staff_maker  = new AMap.Marker({
        position: [staff_lng, staff_lat],
        draggable: false,
        icon: new AMap.Icon({
            size: new AMap.Size(40, 50),  //图标大小
            image: "/themes/v3/static/img/icon_qishou.png",
        })

    });
    staff_maker.setMap(map);
    var shop_maker = new AMap.Marker({
        position: [lng, lat],
        draggable: false,
        icon: new AMap.Icon({
            size: new AMap.Size(40, 50),  //图标大小
            image: "/themes/v3/static/img/shop1.png",
        })

    });
    shop_maker.setMap(map);

    var markat = new AMap.Marker({
        icon: "http://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",
        position: [person_lng, person_lat],
        draggable: false,
        cursor: 'move',
        raiseOnDrag: true
    });
    markat.setMap(map);
    markat.setAnimation('AMAP_ANIMATION_BOUNCE');*/
    var staff_maker  = new AMap.Marker({
        position: [staff_lng, staff_lat],
        draggable: false,
        icon: new AMap.Icon({
            size: new AMap.Size(100, 100),  //图标大小
            image: "/themes/v3/static/img/icon_servicer.png",
            imageSize: new AMap.Size(40,40)

        }),
        raiseOnDrag: true,
    });
    staff_maker.setMap(map);
    var shop_maker = new AMap.Marker({
        position: [lng, lat],
        draggable: false,
        icon: new AMap.Icon({
            size: new AMap.Size(100, 100),  //图标大小
            image: "/themes/v3/static/img/icon_shop.png",
            imageSize: new AMap.Size(40,40)
        }),
        raiseOnDrag: true,
        cursor: 'move',

    });
    shop_maker.setMap(map);

    var markat = new AMap.Marker({
        icon: "https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",
        position: [person_lng, person_lat],
        draggable: false,
        cursor: 'move',
        raiseOnDrag: true
    });
    markat.setMap(map);
   // markat.setAnimation('AMAP_ANIMATION_BOUNCE');
    function openInfo() {
        //构建信息窗体中显示的内容
        var info = [];
        info.push(msg+"</div></div>");
        infoWindow = new AMap.InfoWindow({
            content: info.join("<br/>")  //使用默认信息窗体框样式，显示信息内容
            , offset: new AMap.Pixel(12, -28)
        });
        infoWindow.open(map, [staff_lng,staff_lat]);
    }
    openInfo();
    
    function map_tiao() {
        var url = "<{link ctl='ucenter/order/order_map' http='waimai' arg0='__ORDER_ID__'}>";
        window.location.href = url.replace("__ORDER_ID__",'<{$order.order_id}>');
        
    }
</script>
