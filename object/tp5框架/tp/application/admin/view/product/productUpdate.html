<article class="page-container">
	<form action="" method="post" class="form form-horizontal" enctype="multipart/form-data">
		<input type="text" hidden="hidden" value="{$one.Id}" name="Id">
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>商品名称：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input type="text" class="input-text" value="{$one.name}" placeholder="请输入产品名称" name="name">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>商品简介：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<textarea style="height: 150px;" type="text" class="input-text" placeholder="请输入产品名称" name="introduction">{$one.introduction}</textarea>
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>品牌：</label>
			<div class="formControls col-xs-8 col-sm-9"> 
				<span class="select-box" style="width:150px;">
					<select class="select" name="brandId" size="1">
						<option value="0">--请选择品牌--</option>
						{volist name='brandList' id='brand'}
							<option value="{$brand.Id}" {if condition="$one.brandId==$brand.Id"}selected="selected"{/if}>{$brand.name}</option>
						{/volist}
					</select>
				</span> 
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>商品分类：</label>
			<div class="formControls col-xs-8 col-sm-9"> 
				<span class="select-box" style="width:150px;">
					<select class="select" name="categoryId" size="1">
						<option value="0">--请选择商品分类--</option>
						{volist name='categorylist' id='category'}
							<option value="{$category.Id}" {if condition="$one.categoryId==$category.Id"}selected="selected"{/if}>{$category.name}</option>
						{/volist}
					</select>
				</span> 
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>新品上市：</label>
			<div class="formControls col-xs-8 col-sm-9 skin-minimal">
				<div class="radio-box">
					<input name="newArrival" type="radio" {if condition="$one['newArrival']==0"}checked="checked"{/if} value="0" />
					<label for="sex-1">否</label>
				</div>
				<div class="radio-box">
					<input type="radio" name="newArrival" {if condition="$one['newArrival']==1"}checked="checked"{/if} value="1">
					<label for="sex-2">是</label>
				</div>
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>热门推荐：</label>
			<div class="formControls col-xs-8 col-sm-9 skin-minimal">
				<div class="radio-box">
					<input name="recommendation" type="radio" {if condition="$one['recommendation']==0"}checked{/if} value="0" />
					<label for="sex-1">否</label>
				</div>
				<div class="radio-box">
					<input type="radio" name="recommendation"{if condition="$one.recommendation==1"}checked{/if} value="1">
					<label for="sex-2">是</label>
				</div>
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>爆款产品：</label>
			<div class="formControls col-xs-8 col-sm-9 skin-minimal">
				<div class="radio-box">
					<input name="burstingProducts" type="radio" {if condition="$one.burstingProducts==0"}checked{/if} value="0" />
					<label for="sex-1">否</label>
				</div>
				<div class="radio-box">
					<input type="radio" name="burstingProducts" {if condition="$one.burstingProducts==1"}checked{/if} value="1">
					<label for="sex-2">是</label>
				</div>
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>热门产品：</label>
			<div class="formControls col-xs-8 col-sm-9 skin-minimal">
				<div class="radio-box">
					<input name="hotProduct" type="radio" {if condition="$one.hotProduct==0"}checked{/if} value="0" />
					<label for="sex-1">否</label>
				</div>
				<div class="radio-box">
					<input type="radio" name="hotProduct" {if condition="$one.hotProduct==1"}checked{/if} value="1">
					<label for="sex-2">是</label>
				</div>
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>商品货号：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input type="text" class="input-text" value="{$one.number}" placeholder="请输入商品货号" name="number">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>市场价格：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input type="text" class="input-text" value="{$one.market}" placeholder="请输入市场价格" name="market">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>销售价格：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input type="text" class="input-text" value="{$one.price}" placeholder="请输入市场价格" name="price">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>商品库存：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input type="text" class="input-text" value="{$one.num}" placeholder="请输入商品库存量" name="num">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>商品图片：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<input type="file" multiple="multiple" name="picture[]" id="picture">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>商品详情：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<script id="editor" type="text/plain" style="width:100%;height:400px;" name='content'>{$one.content}</script>
			</div>
		</div>
		<div class="row cl">
			<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2">
				<button  class="btn btn-primary radius" id="productUpdateBtn" type="button"><i class="Hui-iconfont">&#xe632;</i> 保存并提交审核</button>
				<button onClick="history.back(-1)" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
			</div>
		</div>
	</form>
</article>

<!--_footer 作为公共模版分离出去-->
<!--/_footer /作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="__PUBLIC__lib/jquery/1.9.1/jquery.min.js"></script>
<!--<script type="text/javascript" src="__PUBLIC__lib/layer/2.4/layer.js"></script></script> -->
<script type="text/javascript" src="__PUBLIC__static/h-ui/js/H-ui.js"></script>
<script type="text/javascript" src="__PUBLIC__lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="__PUBLIC__lib/jquery.validation/1.14.0/jquery.validate.js"></script>
<script type="text/javascript" src="__PUBLIC__lib/jquery.validation/1.14.0/validate-methods.js"></script>
<script type="text/javascript" src="__PUBLIC__lib/jquery.validation/1.14.0/messages_zh.js"></script>
<script type="text/javascript" src="__PUBLIC__lib/webuploader/0.1.5/webuploader.min.js"></script>
<script type="text/javascript" src="__PUBLIC__lib/ueditor/1.4.3/ueditor.config.js"></script>
<script type="text/javascript" src="__PUBLIC__lib/ueditor/1.4.3/ueditor.all.min.js"></script>
<!--<script type="text/javascript" src="__PUBLIC__lib/ueditor/1.4.3/lang/zh-cn/zh-cn.js"></script>-->
<script>
	$(function(){
//		alert(123456)
	var ufile = document.getElementById("picture")
	var productUpdateBtn = document.getElementById("productUpdateBtn")
	productUpdateBtn.onclick = function(){
//			alert(123456)
//			return false;
		var fd = new FormData();//创建FormData对象；
		
		for (var i=0;i<ufile.files.length;i++) {
			fd.append("ufile[]",ufile.files[i])
		}
		var Id = $("input[name='Id']").val()
		fd.append("Id",Id)
		
		var name = $("input[name='name']").val()
		fd.append("name",name)
		
		var introduction = $("textarea[name='introduction']").val()
		fd.append("introduction",introduction)
		
		var brandId = $("select[name='brandId']").val()
		fd.append("brandId",brandId)
		
		var categoryId = $("select[name='categoryId']").val()
		fd.append("categoryId",categoryId)

		var number = $("input[name='number']").val()
		fd.append("number",number)

		var market = $("input[name='market']").val()
		fd.append("market",market)
		
		var price = $("input[name='price']").val()
		fd.append("price",price)
		
		var num = $("input[name='num']").val()
		fd.append("num",num)
		
		var content = $("textarea[name='content']").val()
		fd.append("content",content)
		
		var newArrival = $("input[name='newArrival']:checked").val()
		fd.append("newArrival",newArrival)
		
		var recommendation = $("input[name='recommendation']:checked").val()
		fd.append("recommendation",recommendation)
		
		var burstingProducts = $("input[name='burstingProducts']:checked").val()
		fd.append("burstingProducts",burstingProducts)
		
		var hotProduct = $("input[name='hotProduct']:checked").val()
		fd.append("hotProduct",hotProduct)
//			
		if(name == ''){
			alert('商品名称不能为空')
			return false;
		}
		if(brandId == '0'){
			alert('商品品牌不能为空')
			return false;
		}
		if(categoryId == '0'){
			alert('商品分类不能为空')
			return false;
		}
		if(number == ''){
			alert('商品货号不能为空')
			return false;
		}
		if(market == ''){
			alert('商品市场价格不能为空')
			return false;
		}
		if(price == ''){
			alert('商品销售价格不能为空')
			return false;
		}
		if(num == ''){
			alert('商品库存不能为空')
			return false;
		}
		if(content == undefined){
			alert('商品详情不能为空')
			return false;
		}
		
		
		
		
		$.ajax({
			type:"post",
			url:"{:url('admin/product/productUpdate')}",
			async:true,
			data:fd,
			contentType:false,
			processData:false,
			success:function(msg){
//				alert(msg)
//				return false;
				if(msg.error){
					alert(msg.info)
					location = "{:url('admin/product/productList')}"
				}else{
					alert(msg.info)
				}
//					alert(msg.info)
				
//					console.log(msg)
			}
		});
		return false;
	}
})


</script>
